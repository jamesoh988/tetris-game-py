# Python Tetris 게임 개발 계획서 (plan_tetris_python)

이 문서는 Pygame 라이브러리를 사용하여 만드는 고급 테트리스 게임의 기획, 설계, 사용법 정보를 담고 있습니다.

---

## 1. 요구사항 명세서 (기획)

### 1.1. 프로젝트 목표
- Pygame을 활용하여 시각적으로 뛰어나고 추가적인 게임 요소를 갖춘 데스크톱용 테트리스 게임을 개발한다.
- 게임의 재미를 더하기 위해 레벨 시스템과 리더보드 기능을 도입한다.

### 1.2. 핵심 기능
- **기본 기능 (웹 버전 계승):**
  - 7종류의 테트로미노 블록, 키보드를 이용한 조작 (이동, 회전, 빠른 드롭).
  - 줄 제거, 점수 획득, 게임 오버, 일시정지, 재시작 기능.

- **추가 및 향상된 기능:**
  - **다음 블록 미리보기:** 다음에 나올 블록을 1~3개까지 미리 보여주는 UI를 추가한다.
  - **고스트 블록 (Ghost Piece):** 현재 블록이 떨어질 최종 위치를 반투명하게 미리 보여주어 조작의 편의성을 높인다.
  - **레벨 시스템:** 특정 점수를 획득하거나 일정 수의 줄을 제거할 때마다 레벨이 오르며, 레벨이 오를수록 블록의 낙하 속도가 빨라진다.
  - **리더보드 (순위표):** 게임 오버 시, 획득한 점수를 플레이어 이름과 함께 기록한다. 상위 10명의 점수를 파일에 저장하고, 게임 시작 화면이나 별도 화면에서 순위를 보여준다.
  - **사운드 효과:** 블록 이동, 회전, 줄 제거, 게임 오버 등 다양한 상황에 맞는 사운드 이펙트(SFX)를 추가한다.
  - **배경 음악:** 게임 플레이 중에 재생될 배경 음악(BGM)을 추가한다.

---

## 2. 기술 설계 문서

### 2.1. 아키텍처
- **플랫폼:** 데스크톱 (Windows, macOS, Linux)
- **주요 라이브러리:** **Pygame** (게임 루프, 그래픽 렌더링, 사운드 처리, 이벤트 처리)
- **파일 구조:**
  - `main.py`: 메인 게임 로직, 게임 루프, 이벤트 처리.
  - `config.py`: 게임 설정 값 (화면 크기, 색상, 블록 모양 등)을 저장하는 설정 파일.
  - `leaderboard.py`: 리더보드 데이터(점수)를 파일(예: `scores.json`)에서 읽고 쓰는 기능을 담당하는 모듈.
  - `assets/` (폴더): 사운드 효과(SFX)와 배경 음악(BGM) 파일을 저장하는 디렉터리.

### 2.2. 핵심 데이터 및 클래스 구조
- **`Game` 클래스 (`main.py`):**
  - 게임의 전체 상태(실행, 일시정지, 게임오버)를 관리.
  - 게임 루프(`run()`)를 포함.
  - `arena`, `player` 객체를 소유.
- **`Block` 클래스 (`main.py`):**
  - 테트로미노 블록의 속성(모양, 색상, 위치)을 정의.
- **`config.py`:**
  - `SCREEN_WIDTH`, `SCREEN_HEIGHT`, `GRID_SIZE` 등 화면 관련 상수.
  - `COLORS` 딕셔너리: 블록 종류별 RGB 색상 값.
  - `SHAPES` 딕셔너리: 블록 종류별 2차원 배열 모양.
- **리더보드 데이터 (`scores.json`):**
  - JSON 형식의 파일로 점수 데이터를 저장.
  - 예: `[{"name": "Player1", "score": 1500}, {"name": "Player2", "score": 1200}]`

### 2.3. 핵심 기능 구현 계획
- **게임 루프 (`main.py`의 `run()` 메소드):**
  1. Pygame 이벤트 큐를 확인 (`pygame.event.get()`).
  2. 키보드 입력 처리 (이동, 회전, 일시정지 등).
  3. 게임 로직 업데이트 (블록 하강, 충돌 검사, 줄 제거).
  4. 화면 렌더링 (`draw()` 함수 호출).
  5. `pygame.time.Clock`을 사용하여 초당 프레임 수(FPS)를 제어.
- **렌더링 (`draw()` 함수):**
  - 배경, 게임 판(grid), 굳어진 블록(`arena`), 움직이는 블록(`player`), 고스트 블록, 점수, 레벨, 다음 블록 미리보기 UI를 순서대로 그린다.
- **리더보드 로직 (`leaderboard.py`):**
  - `load_scores()`: `scores.json` 파일이 없으면 생성하고, 있으면 데이터를 읽어와 점수 내림차순으로 정렬하여 반환.
  - `save_score(name, score)`: 새로운 점수를 기존 데이터에 추가하고, 정렬한 뒤 상위 10개만 `scores.json` 파일에 저장.

---

## 3. 사용 설명서 (README)

### 3.1. 설치 및 실행 방법
1.  Python 3.x 버전을 설치합니다.
2.  터미널(명령 프롬프트)에서 Pygame 라이브러리를 설치합니다:
    ```bash
    pip install pygame
    ```
3.  프로젝트 폴더로 이동하여 메인 파일을 실행합니다:
    ```bash
    python main.py
    ```

### 3.2. 게임 조작키
- **← →:** 블록 좌우 이동
- **↑:** 블록 회전
- **↓:** 블록 아래로 빠르게 내리기 (Soft Drop)
- **Space Bar:** 블록을 즉시 맨 아래로 내리기 (Hard Drop)
- **P:** 일시정지 / 계속하기
- **R:** 게임 재시작
- **ESC:** 게임 종료
